# SWEA 4311 - 오래된 스마트폰



# 실패

```C++
#include <iostream>
#include <string.h>
using namespace std;

int number[10],cmd[5];
int T,N,O,M,goal,res; 
bool check[21]={0,};
int convert(string s){
	int num[21]={0,};
	int idx=0;
	for(int i=idx;i<s.length();i++){
		if(s[i]>='0' && s[i]<='9'){
			num[idx]*=10;
			num[idx]+=(s[i]-'0');
		}
		if(s[i]=='+' || s[i]=='-' || s[i]=='*' || s[i]=='/') idx++;
	}
	int number=num[0];
	idx=1;
	for(int i=0;i<s.length();i++){
		if(s[i]=='+'){
			if(number+num[idx]>1000) return 0;
			number=number+num[idx];
			idx++;
		}
		if(s[i]=='-'){
			if(number-num[idx]<0) return 0;
			number=number-num[idx];
			idx++;
		} 
		if(s[i]=='*'){
			if(number*num[idx]>=1000) return 0;
			number=number*num[idx];
			idx++;
		}
		if(s[i]=='/'){
			if(num[idx]==0) return 0;
			number/=num[idx];
			idx++;
		} 
	}
	return number;
}
void dfs(int cnt,string s,bool check[21]){
	if(cnt>M || cnt>=res) return;
	int c=convert(s);
	if(!c && cnt>1) return;
	if(c==goal){
		for(int i=1;i<cnt;i++){
			if(check[i]){
				res=min(res,cnt+1); return;
			}
		}
		res=min(res,cnt); return;
	}
	for(int i=0;i<10;i++){
		if(!number[i]) continue;
		char num=i+'0';
		for(int j=1;j<5;j++){
			if(!cmd[j]) continue;
			check[cnt]=1;
			string new_s=s;
			if(j==1){
				dfs(cnt+2,s+'+'+num,check);
			}
			if(j==2){
				dfs(cnt+2,s+'-'+num,check);
			}
			if(j==3){
				dfs(cnt+2,s+'*'+num,check);
			}
			if(j==4){
				dfs(cnt+2,s+'/'+num,check);
			}
		}
		check[cnt]=0;	
		dfs(cnt+1,s+num,check);
	}
}

int main(){
	cin >> T;
	int tmp;
	for(int i=1;i<=T;i++){
		cin >> N >> O >> M;
		for(int j=0;j<N;j++){
			cin >> tmp;
			number[tmp]=1;
		}
		for(int j=0;j<O;j++){
			cin >> tmp;
			cmd[tmp]=1;
		}
		cin >> goal;
		res=987654321;
		for(int j=0;j<10;j++){
			if(number[j]) dfs(1,j+"",check);
		}
		if(res==987654321) res=-1;
		cout << "#" << i << " " << res << endl;
		memset(number,0,sizeof(number));
		memset(cmd,0,sizeof(cmd));
		memset(check,0,sizeof(check));
	}
	return 0;
}
```

