```c++
#include <iostream>
#include <vector>
#include <queue>
#include <string.h>
using namespace std;

struct CUS{
	int sy,sx,gy,gx;
};

struct TAXI{
	int y,x,f;
};

vector<CUS> cu;

const int dy[]={0,1,0,-1};
const int dx[]={1,0,-1,0};

int fuel,N,M,ty,tx,res;
int board[21][21],cusLoc[21][21];

void input(){
	cin >> N >> M >> fuel;
	for(int i=1;i<=N;i++){
		for(int j=1;j<=N;j++){
			cin >> board[i][j];
		}
	}
	cin >> ty >> tx;
	for(int i=0;i<M;i++){
		int a,b,c,d;
		cin >> a >> b >> c >> d;
		cu.push_back({a,b,c,d});
	}
}

void cusLocation(){
	memset(cusLoc,0,sizeof(cusLoc));
	for(int i=0;i<cu.size();i++){
		int y=cu[i].sy,x=cu[i].sx;
		cusLoc[y][x]=i+1;
	}
}

bool isMindist(int sel_y,int sel_x,int sel_f,int y,int x,int f){
	if(sel_f<=f){
		if(sel_f<f){
			return true;
		} 
		else if(sel_f==f){
				if(sel_y>=y){
					if(sel_y>y){
						return true;
					}
					else if(sel_y==y){
						if(sel_x>x){
							return true;
						}
					}	
				}
			}
		}
		return false;
}


int selectCus(int ty,int tx){
	cusLocation();
	queue<TAXI> t;
	bool visit[21][21];
	memset(visit,0,sizeof(0)); visit[ty][tx]=1;
	
	// 택시 손님 위치가 같다면 
	if(cusLoc[ty][tx]) return cusLoc[ty][tx]-1;
	int sel_y=21,sel_x=21,sel_f=-1;
	int cus_idx=-1;
	t.push({ty,tx,fuel});
	while(!t.empty()){
		TAXI now=t.front(); t.pop();
		int y=now.y,x=now.x,f=now.f;
		for(int i=0;i<4;i++){
			int ny=y+dy[i],nx=x+dx[i];
			if(ny<1 || nx<1 || ny>N || nx>N) continue;
			if(visit[ny][nx] || board[ny][nx]) continue;
			visit[ny][nx]=1;
			if(cusLoc[ny][nx]){
				if(isMindist(sel_y,sel_x,sel_f,y,x,f)){
					sel_f=f; sel_y=ny; sel_x=nx; cus_idx=cusLoc[ny][nx]-1;
					fuel=f;
				}
				continue;
			}
			t.push({ny,nx,f-1});
		}
	}
	return cus_idx;
}

void move(){
	while(cu.size() && fuel){
		int idx=selectCus(ty,tx);
		cout << "idx: " << idx << endl;
		cout << fuel;
		return;
	}
	if(!cu.size() && fuel) res=-1;
	res=fuel;
}

int main(){
	input();
	move();
	cout << res << endl;
	return 0;
}
```

