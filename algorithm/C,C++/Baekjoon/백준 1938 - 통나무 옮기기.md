# 백준 1938 - 통나무 옮기기



# tmp

```c++
#include <iostream>
#define MAX 51
using namespace std;

struct{
	int y,x;
}Tree[3],EEE[3],backup[3];

int dy[]={0,1,0,-1},dx[]={1,0,-1,0};
int N,res=987654321;
char map[MAX][MAX];
bool flag=false,visit[MAX][MAX][2];

bool move_check(int dir){
	for(int i=0;i<3;i++){
		int y=Tree[i].y+dy[dir],x=Tree[i].x+dx[dir];
		if(map[y][x]-'0'==1 || y<0 || x<0 || y>N-1 || x>N-1) return false;
	}
	return true;
}
bool rotate_check(){
	for(int i=Tree[1].y-1;i<=Tree[1].y+1;i++){
		for(int j=Tree[1].x-1;j<=Tree[1].x+1;j++){
			if(map[i][j]-'0'==1 || i<0 || j<0 || i>N-1 || j>N-1) return false;
		}
	}
	return true;
}

bool check(){
	for(int i=0;i<3;i++){
		if(EEE[i].y!=Tree[i].y || EEE[i].x!=Tree[i].x) return false;
	}
	return true;
}

void game(int cnt,int axis){
	
	if(check()){
		res=min(res,cnt);
	}
	int ma[MAX][MAX]={0,};
	for(int i=0;i<3;i++){
		ma[Tree[i].y][Tree[i].x]=9;
	}
	cout << endl;
	for(int i=0;i<N;i++){
		for(int j=0;j<N;j++){
			cout << ma[i][j];
		}
		cout << endl;
	}
	if(rotate_check()){
		if(axis==0){
			Tree[0].y=Tree[1].y-1; Tree[0].x=Tree[1].x;
			Tree[2].y=Tree[1].y+1; Tree[2].x=Tree[1].x;
		}
		else if(axis==1){
			Tree[0].y=Tree[1].y; Tree[0].x=Tree[1].x-1;
			Tree[2].y=Tree[1].y; Tree[2].x=Tree[1].x+1;
		}
		if(!visit[Tree[1].y][Tree[1].x][(axis+1)%2]){
			visit[Tree[1].y][Tree[1].x][(axis+1)%2]=1;
			game(cnt+1,(axis+1)%2);
			visit[Tree[1].y][Tree[1].x][(axis+1)%2]=0;
		}
		if(axis==0){
			Tree[0].y=Tree[1].y; Tree[0].x=Tree[1].x-1;
			Tree[2].y=Tree[1].y; Tree[2].x=Tree[1].x+1;
		}
		else if(axis==1){
			Tree[0].y=Tree[1].y-1; Tree[0].x=Tree[1].x;
			Tree[2].y=Tree[1].y+1; Tree[2].x=Tree[1].x;
		}
	} 
	
	for(int dir=0;dir<4;dir++){
		if(!move_check(dir)) continue;
		for(int i=0;i<3;i++){
			backup[i].y=Tree[i].y; backup[i].x=Tree[i].x;
			Tree[i].y+=dy[dir]; Tree[i].x+=dx[dir];
		}
		if(!visit[Tree[1].y][Tree[1].x][axis]){
			visit[Tree[1].y][Tree[1].x][axis]=1;
			game(cnt+1,axis);
			visit[Tree[1].y][Tree[1].x][axis]=0;
		}
		for(int i=0;i<3;i++){
			Tree[i].y=backup[i].y; Tree[i].x=backup[i].x;
		}
	}
}


int main(){
	cin >> N;
	int cnt=0,cnt1=0;
	for(int i=0;i<N;i++){
		string s; cin >> s;
		for(int j=0;j<N;j++){
			map[i][j]=s[j];
			if(map[i][j]=='B'){
				Tree[cnt].y=i; Tree[cnt].x=j;
				cnt++;
			}
			if(map[i][j]=='E'){
				EEE[cnt1].y=i; EEE[cnt1].x=j;
				cnt1++;
			}
		}
	}
	visit[Tree[1].y][Tree[1].x][1]=1;
	game(0,1);
	cout << res << endl;
	return 0;
}
```

