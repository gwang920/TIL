# 프로그래머스 - 블록이동하기

- 카테고리 : 시뮬레이션/BFS



# 성공

```c++
#include <string>
#include <vector>
#include <queue>
#include <iostream>
using namespace std;

struct INFO{
  int fy,fx,sy,sx,cnt,dir;  
};
vector<vector<int>> b;
queue<INFO> q;
bool visit[101][101][101][101]={0,};
const int dy[]={0,1,0,-1},dx[]={1,0,-1,0};
int answer = 0,N;
    
void bfs(){
    q.push({0,0,0,1,0,0});
    visit[0][0][0][1]=1;
    while(!q.empty()){
        auto now=q.front(); q.pop();
        int fy=now.fy,fx=now.fx,sy=now.sy,sx=now.sx,cnt=now.cnt,dir=now.dir;
        cout << fy << fx << ' ';
        if((fy==N-1 && fx==N-1) || (sy==N && sx==N-1)){
            answer=cnt; return;
        }
        for(int i=0;i<4;i++){
            int nfy=fy+dy[i],nfx=fx+dx[i];
            int nsy=sy+dy[i],nsx=sx+dx[i];
            if(nfy<0 || nfx<0 || nfy>N-1 || nfx>N-1) continue;
            if(nsy<0 || nsx<0 || nsy>N-1 || nsx>N-1) continue;
            if(visit[nfy][nfx][nsy][nsx]) continue;
            if(b[nfy][nfx] || b[nsy][nsx]) continue;
            visit[nfy][nfx][nsy][nsx]=1;
            q.push({nfy,nfx,nsy,nsx,cnt+1,dir});
        }
        if(dir==0){
            for(int i=0;i<2;i++){
              if(!b[fy+1][fx] && !b[sy+1][sx]){
                int nfy=sy+(1-i),nfx=sx,nsy=fy+i,nsx=fx;
                if(visit[nfy][nfx][nsy][nsx]) continue;
                visit[nfy][nfx][nsy][nsx]=1;
                q.push({nfy,nfx,nsy,nsx,cnt+1,1});
            }  
            }
            if(fy<1) continue;
            for(int i=0;i<2;i++){
              if(!b[fy-1][fx] && !b[sy-1][sx]){
                int nfy=sy,nfx=sx+(-1+i),nsy=fy,nsx=fx-i;
                if(visit[nfy][nfx][nsy][nsx]) continue;
                visit[nfy][nfx][nsy][nsx]=1;
                q.push({nfy,nfx,nsy,nsx,cnt+1,1});
            }  
            }
        }else{
            for(int i=0;i<2;i++){
              if(!b[fy][fx+1] && !b[sy][sx+1]){
                int nfy=sy,nfx=sx+(1-i),nsy=fy,nsx=fx+i;
                if(visit[nfy][nfx][nsy][nsx]) continue;
                visit[nfy][nfx][nsy][nsx]=1;
                q.push({nfy,nfx,nsy,nsx,cnt+1,0});
            }  
            }
            if(fx<1) continue;
            for(int i=0;i<2;i++){
              if(!b[fy][fx-1] && !b[sy][sx-1]){
                int nfy=sy,nfx=sx+(i-1),nsy=fy,nsx=fx-i;
                if(visit[nfy][nfx][nsy][nsx]) continue;
                visit[nfy][nfx][nsy][nsx]=1;
                q.push({nfy,nfx,nsy,nsx,cnt+1,0});
            }  
            }
        }
    }
}

int solution(vector<vector<int>> board) {
    b=board; N=board.size();
    bfs();
    return answer;
}
```

