# Open Api

### - Open Api data를 활용한 지도 만들기

- kakao의 지도정보를 활용

- 제주도 모범음식점 list ( [https://www.data.go.kr](https://www.data.go.kr/))

```

<rfcOpenApi>
<header>
<resultCode>00</resultCode>
<resultMsg>success</resultMsg>
</header>
<body>
<pageIndex>0</pageIndex>
<pageSize>10</pageSize>
<startPage>1</startPage>
<totalCount>315</totalCount>
<data>
<list>
<adres>조천읍 선교로 525</adres>
<adstrd>조천읍</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>동이트는집신산점</dataContent>
<dataSid>1001021</dataSid>
<dataTitle>오름나그네</dataTitle>
<fileCnt>0</fileCnt>
<la>33.459324</la>
<lo>126.712185</lo>
<menu>칼국수 등</menu>
<regDate>2014-07-17</regDate>
<telNo> </telNo>
</list>
<list>
<adres>신산로 69-1 (일도이동)</adres>
<adstrd>일도이동</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>동이트는집신산점</dataContent>
<dataSid>1001020</dataSid>
<dataTitle>동이트는집신산점</dataTitle>
<fileCnt>0</fileCnt>
<la>33.507648</la>
<lo>126.534497</lo>
<menu>추어탕</menu>
<regDate>2014-07-17</regDate>
<telNo> </telNo>
</list>
<list>
<adres>우정로11길 3 (외도일동)</adres>
<adstrd>외도일동</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>조마루뼈다귀외도점</dataContent>
<dataSid>1001019</dataSid>
<dataTitle>조마루뼈다귀외도점</dataTitle>
<fileCnt>0</fileCnt>
<la>33.488185</la>
<lo>126.431479</lo>
<menu>뼈다귀전골</menu>
<regDate>2014-07-17</regDate>
<telNo>064-742-5885</telNo>
</list>
<list>
<adres>애월읍 부룡수길 17</adres>
<adstrd>애월읍</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>뚱딴지</dataContent>
<dataSid>1001018</dataSid>
<dataTitle>뚱딴지</dataTitle>
<fileCnt>0</fileCnt>
<la>33.474788</la>
<lo>126.354850</lo>
<menu>백숙 등</menu>
<regDate>2014-07-17</regDate>
<telNo> </telNo>
</list>
<list>
<adres>조천읍 일주동로 792</adres>
<adstrd>조천읍</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>청우가든</dataContent>
<dataSid>1001017</dataSid>
<dataTitle>청우가든</dataTitle>
<fileCnt>0</fileCnt>
<la>33.530876</la>
<lo>126.625889</lo>
<menu>돼지갈비</menu>
<regDate>2014-07-17</regDate>
<telNo>064- 782-5201</telNo>
</list>
<list>
<adres>승천로 68 (아라이동)</adres>
<adstrd>아라이동</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>돈풍년</dataContent>
<dataSid>1001016</dataSid>
<dataTitle>돈풍년</dataTitle>
<fileCnt>0</fileCnt>
<la>33.492787</la>
<lo>126.542238</lo>
<menu>돼지갈비</menu>
<regDate>2014-07-17</regDate>
<telNo>064 -713 -5252</telNo>
</list>
<list>
<adres>애월읍 구엄길 3</adres>
<adstrd>애월읍</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>수눌음</dataContent>
<dataSid>1001015</dataSid>
<dataTitle>수눌음</dataTitle>
<fileCnt>0</fileCnt>
<la>33.478037</la>
<lo>126.378479</lo>
<menu>오리구이</menu>
<regDate>2014-07-17</regDate>
<telNo> </telNo>
</list>
<list>
<adres>조천읍 남조로 2326</adres>
<adstrd>조천읍</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>뜰향기</dataContent>
<dataSid>1001014</dataSid>
<dataTitle>뜰향기</dataTitle>
<fileCnt>0</fileCnt>
<la>33.474081</la>
<lo>126.659038</lo>
<menu>쌈밥정식</menu>
<regDate>2014-07-17</regDate>
<telNo> </telNo>
</list>
<list>
<adres>임항로 49 (건입동)</adres>
<adstrd>건입동</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>물금</dataContent>
<dataSid>1001013</dataSid>
<dataTitle>물금</dataTitle>
<fileCnt>0</fileCnt>
<la>33.517137</la>
<lo>126.529833</lo>
<menu>조림</menu>
<regDate>2014-07-17</regDate>
<telNo>064-723-2772</telNo>
</list>
<list>
<adres>서해안로 242 (도두일동)</adres>
<adstrd>도두일동</adstrd>
<bizcnd>한식</bizcnd>
<bsnmNm> </bsnmNm>
<dataContent>섬올래</dataContent>
<dataSid>1001012</dataSid>
<dataTitle>섬올래</dataTitle>
<fileCnt>0</fileCnt>
<la>33.509962</la>
<lo>126.471688</lo>
<menu>생선회</menu>
<regDate>2014-07-17</regDate>
<telNo>064-742-2929</telNo>
</list>
</data>
</body>
</rfcOpenApi>
```





# #실습

##### - Data의 la,lo  즉, 위도,경도의 정보만 가져와서 지도에 표시하자

![1561549912397](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1561549912397.png)

```html
<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f0d6e6a070335aaa5e70c85e9c45b206&libraries=services"></script>


	<script
		src="http://data.jeju.go.kr/rest/besteating/getEatingList?authApiKey=V%2BXyeaErdAAZAf2dSPlKPWTvwIjmHbInOd70m0wxy1C5v0g4RTgBBnzKsmMcdY3nGQcoMdzx00lSpth0Dn%2FsUg%3D%3D"></script>


	<style>
		#map {
			width: 300px;
			height: 300px;
			border: 2px solid red;
		}
	</style>
	<script>
        // parsing을 통해 data(=openapi페이지 전체)를 가져오자
		function parsing(data, map) {  // 괄호에는 여러개의 변수가 들어갈 수 있다
            
			var Lat = [];
			var Lng = [];

		
			var ts = $(data).find('list');   // find 자식 개체 가져오기
            //전체 페이지(data) 에서 list 위치를 찾아 ts에 저장

			ts.each(function (index, item) {// la lo를 순차적으로 가져온다(위->아래)

				var d = $(this).find('la');
				var d1 = $(this).find('lo');
			
				Lat.push(Number($(d).text()));
				Lng.push(Number($(d1).text()));


			});

			for (var i = 0; i < Lat.length; i++) {

				var markerPosition = new kakao.maps.LatLng(Lat[i], Lng[i]);


				// 마커를 생성
				var marker = new kakao.maps.Marker({
					position: markerPosition
				});

				// 마커가 지도 위에 표시되도록 설정
				marker.setMap(map);

			}


		}
		function getData(map) {
// 1) 
// 2) https://cors.io/?
            // url 2)막혀서 1)로 수정
			$.ajax({
				url: 'https://cors-anywhere.herokuapp.com/ http://data.jeju.go.kr/rest/besteating/getEatingList?authApiKey=V%2BXyeaErdAAZAf2dSPlKPWTvwIjmHbInOd70m0wxy1C5v0g4RTgBBnzKsmMcdY3nGQcoMdzx00lSpth0Dn%2FsUg%3D%3D',
				success: function (data) {
					
					parsing(data, map);
				}
			});

		}

		// map loading

		$(document).ready(function () {
			var center = new daum.maps.LatLng(33.459324, 126.712185);
			var container =
				document.getElementById('map');

			var options = {
				center: center,
				level: 8
			};

			var map = new daum.maps.Map(container, options);

			getData(map);


		});
	</script>
</head>
<body>
	<div id="map"></div>
</body>

</html>


```

